name = "blackroad-workers"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Account ID - Replace with your Cloudflare account ID
# account_id = "848cf0b18d51e0170e0d1537aec3505a"

[build]
command = "npm install && npm run build"

[build.upload]
format = "service-worker"

# Environment variables
[vars]
ENVIRONMENT = "development"

# KV Namespaces
# [[kv_namespaces]]
# binding = "CACHE"
# id = "your-kv-namespace-id"

# D1 Databases
# [[d1_databases]]
# binding = "DB"
# database_name = "blackroad-workers-db"
# database_id = "your-database-id"

# R2 Buckets
# [[r2_buckets]]
# binding = "BUCKET"
# bucket_name = "blackroad-workers-bucket"

# Durable Objects
# [[durable_objects.bindings]]
# name = "COUNTER"
# class_name = "Counter"
# script_name = "blackroad-workers"

# Routes
# [[routes]]
# pattern = "workers.blackroad.io/*"
# zone_name = "blackroad.io"

# Production environment
[env.production]
name = "blackroad-workers-production"
vars = { ENVIRONMENT = "production" }

# Staging environment
[env.staging]
name = "blackroad-workers-staging"
vars = { ENVIRONMENT = "staging" }
